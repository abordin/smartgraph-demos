(function(){var a="sproutcore/ace";if(!SC.BUNDLE_INFO){throw"SC.BUNDLE_INFO is not defined!"
}if(SC.BUNDLE_INFO[a]){return}SC.BUNDLE_INFO[a]={requires:["sproutcore/empty_theme"],styles:["/static/sproutcore/ace/en/71fef724301b04e00df8643ac18a190f56ab68a0/stylesheet-packed.css","/static/sproutcore/ace/en/71fef724301b04e00df8643ac18a190f56ab68a0/stylesheet.css"],scripts:["/static/sproutcore/ace/en/71fef724301b04e00df8643ac18a190f56ab68a0/javascript-packed.js","/static/sproutcore/ace/en/71fef724301b04e00df8643ac18a190f56ab68a0/javascript.js"]}
})();Smartgraphs=SC.Application.create({NAMESPACE:"Smartgraphs",VERSION:"0.1.0",triggers:[],trace:YES});
Smartgraphs.activityController=SC.ObjectController.create({lookup:function(b){var a=this.get("context");
return(a.hasOwnProperty(b)?a[b]:undefined)},canOpenNextPage:NO,openNextPage:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_PAGE_START);
Smartgraphs.activityPagesController.selectNextPage()}});Smartgraphs.activityPageController=SC.ObjectController.create({contentBinding:"Smartgraphs.activityPagesController.selection",lookup:function(b){var a=this.get("context");
return(a.hasOwnProperty(b)?a[b]:Smartgraphs.activityController.lookup(b))}});Smartgraphs.activityPagesController=SC.ArrayController.create({contentBinding:"Smartgraphs.activityController.pages",allowsMultipleSelection:NO,indexOfSelectedPage:function(){var a=this.get("selection");
var b=a.indexSetForSource(this);return(b?b.toArray().objectAt(0):undefined)}.property("selection","[]").cacheable(),selectFirstPage:function(){if(this.get("length")>0){this.selectObject(this.objectAt(0))
}},selectNextPage:function(){var a=this.get("indexOfSelectedPage");if(a+1<this.get("length")){this.selectObject(this.objectAt(a+1))
}}});Smartgraphs.activityStepController=SC.ObjectController.create({contentBinding:"Smartgraphs.activityPageController.currentStep",registeredTriggers:[],begin:function(){this.registerTriggerResponses();
Smartgraphs.sendAction("fireActivityEvent",this,{eventName:"stepBeginning"})},finish:function(){Smartgraphs.sendAction("fireActivityEvent",this,{eventName:"stepFinished"});
this.unregisterOldTriggers()},unregisterOldTriggers:function(){var c=this.get("registeredTriggers");
for(var a=0,b=c.get("length");a<b;a++){c[a].unregister()}this.set("registeredTriggers",[])
},registerTriggerResponses:function(){var h=this.get("triggerResponses");var e=this.get("registeredTriggers");
var f,a,b,d,j,c;for(var g=0,k=h.get("length");g<k;g++){f=h.objectAt(g);a=f.get("trigger");
b=a.get("name");d=Smartgraphs.triggers[b];if(d){j=SC.mixin(SC.copy(a.get("args")),f.get("args"));
c=f.get("commands");d.register(j,c);e.pushObject(d)}}},executeCommands:function(g){var f,c,a,e,d,h;
for(var b=0,j=g.get("length");b<j;b++){f=g.objectAt(b);c=f.get("command");d=SC.mixin(SC.copy(c.get("literalArgs")),f.get("literalArgs"));
e=SC.mixin(SC.copy(c.get("substitutedArgs")),f.get("substitutedArgs"));for(h in e){if(e.hasOwnProperty(h)){d[h]=this.lookup(e[h])
}}Smartgraphs.sendAction(c.get("actionName"),this,d)}},lookup:function(b){var a=this.get("context");
return(a.hasOwnProperty(b)?a[b]:Smartgraphs.activityPageController.lookup(b))},submitButtonShouldBeEnabled:NO});
Smartgraphs.activityViewController=SC.ObjectController.create({dataViewNowShowing:null,firstPaneNowShowing:null,secondPaneNowShowing:null,firstImageValue:null,secondImageValue:null,showSinglePane:function(){this.set("dataViewNowShowing","Smartgraphs.activityPage.singlePaneDataView")
},showSplitPane:function(){this.set("dataViewNowShowing","Smartgraphs.activityPage.splitPaneDataView")
},showImage:function(b,a){if(b==="first"){this.set("firstImageValue",a);this.set("firstPaneNowShowing","Smartgraphs.activityPage.firstImageView");
return YES}if(b==="second"){this.set("secondImageValue",a);this.set("secondPaneNowShowing","Smartgraphs.activityPage.secondImageView");
return YES}return NO},showGraph:function(b,a){if(b==="first"){Smartgraphs.firstGraphController.openGraph(a);
this.set("firstPaneNowShowing","Smartgraphs.activityPage.firstGraphView");return YES
}if(b==="second"){Smartgraphs.secondGraphController.openGraph(a);this.set("secondPaneNowShowing","Smartgraphs.activityPage.secondGraphView");
return YES}return NO},hidePane:function(a){if(a==="first"){this.set("firstPaneNowShowing",null);
return YES}if(a==="second"){this.set("secondPaneNowShowing",null);return YES}return NO
},createSeriesView:function(a){},removeSeriesView:function(a){}});Smartgraphs.appWindowController=SC.ObjectController.create({nowShowing:null,loadingMessage:null,showActivityView:function(){this.set("nowShowing","Smartgraphs.activityPage.activityView")
},showActivityLoadingView:function(){this.set("nowShowing","Smartgraphs.mainPage.loadingView");
this.set("loadingMessage",Smartgraphs.activityPage.getPath("activityView.loadingMessage"))
},showActivityLoadingErrorView:function(){this.set("nowShowing","Smartgraphs.activityPage.errorLoadingActivityView")
}});Smartgraphs.GraphController=SC.ObjectController.extend(SC.Responder,{openGraph:function(a){var b=Smartgraphs.store.find(Smartgraphs.Graph,a);
if(!b){b=Smartgraphs.store.createRecord(Smartgraphs.Graph,{id:a});Smartgraphs.store.commitRecords()
}this.set("content",b)},setAxes:function(a){var b=Smartgraphs.store.find(Smartgraphs.Axes,a);
if(!b){b=Smartgraphs.store.createRecord(Smartgraphs.Axes,{guid:a})}this.set("axes",b);
Smartgraphs.store.commitRecords()},addSeries:function(b){var a=Smartgraphs.store.find(Smartgraphs.DataSeries,b);
if(!a){a=Smartgraphs.store.createRecord(Smartgraphs.DataSeries,{guid:b})}this.get("allSeries").pushObject(a);
Smartgraphs.store.commitRecords()},removeSeries:function(e){var a=this.get("allSeries");
var c;for(var b=0,d=a.get("length");b<d;b++){c=a.objectAt(b);if(c.get("id")===e){a.removeObject(c);
break}}},removeAllSeries:function(){},view:function(){return Smartgraphs.getPath(this.get("viewPath"))
}.property(),startRoutingInputEvents:function(){var a=this.getPath("view.graphCanvasView.axesView");
a.set("shouldNotifyController",YES);a.set("controller",this)},stopRoutingInputEvents:function(){var a=this.getPath("view.graphCanvasView.axesView");
a.set("shouldNotifyController",NO)},inputAreaMouseDown:function(a,b){Smartgraphs.sendAction("startGraphInputAt",this,{x:a,y:b})
},inputAreaMouseDragged:function(a,b){Smartgraphs.sendAction("continueGraphInputAt",this,{x:a,y:b})
},inputAreaMouseUp:function(a,b){Smartgraphs.sendAction("endGraphInputAt",this,{x:a,y:b})
}});sc_require("controllers/graph");Smartgraphs.firstGraphController=Smartgraphs.GraphController.create({viewPath:"activityPage.firstGraphView"});
Smartgraphs.pageNavController=SC.ArrayController.create({nextShouldBeEnabled:NO,backShouldBeEnabled:NO,currentIndex:null,visitableIndices:null,nextShouldBeEnabledBinding:"Smartgraphs.activityController.canOpenNextPage"});
Smartgraphs.responseTemplateController=SC.ObjectController.create({contentBinding:"Smartgraphs.activityStepController.responseTemplate",contentDidChange:function(){this.invokeOnce(this._initializeValues)
}.observes("content"),_initializeValues:function(){var a=this.get("initialValues");
if(a){this.set("values",a.copy())}},editingShouldBeEnabled:false});sc_require("controllers/graph");
Smartgraphs.secondGraphController=Smartgraphs.GraphController.create({viewPath:"activityPage.secondGraphView"});
Smartgraphs.selectedPointsController=SC.ArrayController.create({contentBinding:"Smartgraphs.selectedSeriesController.points",xMinBinding:"Smartgraphs.selectedSeriesController.xMin",xMaxBinding:"Smartgraphs.selectedSeriesController.xMax",nBinsBinding:"Smartgraphs.selectedSeriesController.nBins",_points:[],contentDidChange:function(){this.invokeOnce(this._cleanupData)
}.observes("content"),binWidth:function(){return((this.get("xMax")-this.get("xMin"))/this.get("nBins"))
}.property("xMin","xMax","nBins").cacheable(),_cleanupData:function(){this._points=[];
this.beginPropertyChanges();var g=function(r){var q=0;for(var o=0,p=r.get("length");
o<p;o++){q=q+r[o]}return(q/p)};var c=this.get("xMin"),e=this.get("xMax"),j=this.get("nBins");
var a=this.get("binWidth");this._bins=[];for(var d=0;d<j;d++){this._bins[d]=[]}var k,h,n;
var m=[];for(d=0,n=this.get("length");d<n;d++){var l=this.objectAt(d);m.push(l.get("id"));
k=l.get("x");h=l.get("y");var b=Math.floor((k-c)/a);if(0<=b&&b<j){this._bins[b].push(h)
}}Smartgraphs.store.destroyRecords(Smartgraphs.DataPoint,m);Smartgraphs.store.commitRecords();
this.endPropertyChanges();var f=this;this._points=[];this.invokeLast(function(){for(d=0;
d<j;d++){if(f._bins[d].get("length")>0){k=(d+0.5)*a;h=g(f._bins[d]);f.addPredictionPoint(k,h,d)
}}})},addPredictionPoint:function(b,d,c){var a=Smartgraphs.store.createRecord(Smartgraphs.DataPoint,{x:b,y:d,guid:Smartgraphs.DataPoint.nextGuid++});
this.pushObject(a);Smartgraphs.store.commitRecords();this._points[c]=a},_inputStarted:NO,_lastX:null,_lastY:null,addOrUpdatePredictionPoint:function(b,f){var d=this.get("xMin");
var e=this.get("binWidth");var c=Math.floor((b-d)/e);var a=this._points[c];if(a){Smartgraphs.store.destroyRecord(Smartgraphs.DataPoint,a.get("id"))
}b=(c+0.5)*e;this.invokeLast(function(){this.addPredictionPoint(b,f,c)})},startGraphInputAt:function(a,d){var b=this.get("xMin"),c=this.get("xMax");
if(a<b||a>c){return YES}this._lastX=a;this._lastY=d;this._inputStarted=YES;this.addOrUpdatePredictionPoint(a,d);
return YES},continueGraphInputAt:function(n,k){if(!this._inputStarted){this.startGraphInputAt(n,k);
return YES}var c=this.get("xMin"),h=this.get("xMax"),a=this.get("binWidth"),m=this.get("nBins"),l=Math.floor((n-c)/a),g=Math.floor((this._lastX-c)/a);
var r,q;var j,d,b;var e=Math.abs(g-l)+1;var p=[];if(l<g){j=l;d=g;r=k;q=(this._lastY-k)/e
}else{j=g;d=l;r=this._lastY;q=(k-this._lastY)/e}for(var f=0;f<e;f++){b=f+j;if(b===0){this._lastX=0.5*a;
this._lastY=r+f*q}if(b===(m-1)){this._lastX=(m-0.5)*a;this._lastY=r+f*q}if(0<=b&&b<m){p.push({x:(b+0.5)*a,y:r+f*q,binIdx:b});
var o=this._points[b];if(o){Smartgraphs.store.destroyRecord(Smartgraphs.DataPoint,o.get("id"))
}}}this.invokeLast(function(){for(var t=0,u=p.get("length");t<u;t++){var s=p[t];this.addPredictionPoint(s.x,s.y,s.binIdx)
}});this._lastX=n;this._lastY=k},endGraphInputAt:function(a,d){this._inputStarted=NO;
this._lastX=null;this._lastY=null;var b=this.get("xMin"),c=this.get("xMax");if(a<b||a>c){return YES
}this.addOrUpdatePredictionPoint(a,d);return YES},addSensorPoint:function(b,c){var a=Smartgraphs.store.createRecord(Smartgraphs.DataPoint,{x:b,y:c,guid:Smartgraphs.DataPoint.nextGuid++});
this.pushObject(a);Smartgraphs.store.commitRecords()}});Smartgraphs.selectedSeriesController=SC.ObjectController.create({nBins:50});
Smartgraphs.mockResponses={};sc_require("data_sources/mock_responses/mock_responses");
Smartgraphs.mockResponses["/backend/activity/1/motion-without-words/"]={url:"/backend/activity/1/motion-without-words/",title:"Motion Without Words",pages:["/backend/activity/1/page/1/","/backend/activity/1/page/2/","/backend/activity/1/page/3/","/backend/activity/1/page/4/"]};
Smartgraphs.RailsDataSource=SC.DataSource.extend({latency:500,fetch:function(a,b){console.log("RailsDataSource.fetch()");
return NO},retrieveRecord:function(a,b){var c=Smartgraphs.store.recordTypeFor(b);
console.log("RailsDataSource.retrieveRecord()");console.log("  Record type requested = %s",c.toString());
console.log("  id requested = %s",Smartgraphs.store.idFor(b));if(c===Smartgraphs.Activity){this.retrieveActivityRecord(a,b);
console.log("  returning YES from retrieveRecord");return YES}return NO},createRecord:function(a,b){console.log("RailsDataSource.createRecord()");
return NO},updateRecord:function(a,b){console.log("RailsDataSource.updateRecord()");
return NO},destroyRecord:function(a,b){console.log("RailsDataSource.destroyRecord()");
return NO},retrieveActivityRecord:function(a,b){this.invokeLater(this._mockActivityRequestCompletion,this.get("latency"),a,b)
},_mockActivityRequestCompletion:function(b,d){var c=b.idFor(d);var a=Smartgraphs.mockResponses.hasOwnProperty(c)?Smartgraphs.mockResponses[c]:SC.Error.create();
this.didRetrieveActivityRecord(a,b,d)},didRetrieveActivityRecord:function(b,a,c){if(SC.ok(b)){console.log("didRetrieveActivityRecord successful");
a.dataSourceDidComplete(c,b)}else{a.dataSourceDidError(c)}}});Smartgraphs.ActivityPage=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activity:SC.Record.toOne("Smartgraphs.Activity",{inverse:"pages"}),name:SC.Record.attr(String),index:SC.Record.attr(Number),introText:SC.Record.attr(String),steps:SC.Record.toMany("Smartgraphs.ActivityStep",{inverse:"activityPage"}),firstStep:SC.Record.toOne("Smartgraphs.ActivityStep"),context:{},isSelectable:NO,currentStep:null});
sc_require("models/activity_page");Smartgraphs.ActivityPage.FIXTURES=[{url:"/backend/activity/1/page/1/",activity:"/backend/activity/1/motion-without-words/",name:"Introductory Page",index:1,introText:"<h1>How can you tell a story about motion without using words?</h1><p>The picture at right communicates direction of traffic using recognizable symbols. In this activity, you will explore how motions in two opposite directions appear on a position-time graph. By doing so, you will learn conventional methods of motion storytelling and analysis.</p>",steps:["/backend/activity/1/page/1/step/1/"],firstStep:"/backend/activity/1/page/1/step/1/"},{url:"/backend/activity/1/page/2/",activity:"/backend/activity/1/motion-without-words/",name:"Second Page",index:2,introText:'<p>Let’s start by demonstrating what you already know about representing motion on a graph. Imagine a straight walking path that is 5 meters long. Point A is at the 0-meter mark. Point B is at the 4-meter mark.</p><img src="/static/smartgraphs/en/ebb665ef3ab6a11a32f0c0726412647f900cffb6/resources/numberline.png">',steps:["/backend/activity/1/page/2/step/1/","/backend/activity/1/page/2/step/2/"],firstStep:"/backend/activity/1/page/2/step/1/"},{url:"/backend/activity/1/page/3/",activity:"/backend/activity/1/motion-without-words/",name:"Third Page",index:3,introText:"<p>Let’s practice collecting data with the motion sensor so you can see whether your sketches were accurate. You will walk on a 5-meter walking path like the one described earlier.</p>",steps:["/backend/activity/1/page/3/step/1/","/backend/activity/1/page/3/step/2/"],firstStep:"/backend/activity/1/page/3/step/1/"},{url:"/backend/activity/1/page/4/",activity:"/backend/activity/1/motion-without-words/",name:"Fourth Page",index:4,introText:"<p>How did the actual graph of your motion compare to your prediction?<p>",steps:["/backend/activity/1/page/4/step/1/"],firstStep:"/backend/activity/1/page/4/step/1/"}];
Smartgraphs.ActivityStep=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activityPage:SC.Record.toOne("Smartgraphs.ActivityPage",{inverse:"steps"}),beforeText:SC.Record.attr(String),responseTemplate:SC.Record.toOne("Smartgraphs.ResponseTemplate"),buttons:SC.Record.toMany("Smartgraphs.Button",{inverse:"step"}),afterText:SC.Record.attr(String),triggerResponses:SC.Record.toMany("Smartgraphs.TriggerResponse",{inverse:"step"}),context:{},isLastStep:SC.Record.attr(Boolean),submitButtonShouldBeVisible:SC.Record.attr(Boolean),submitButtonTitle:SC.Record.attr(String)});
sc_require("models/activity_step");Smartgraphs.ActivityStep.FIXTURES=[{url:"/backend/activity/1/page/1/step/1/",activityPage:"/backend/activity/1/page/1/",beforeText:"",responseTemplate:null,afterText:"",buttons:[],triggerResponses:["/backend/activity/1/page/1/step/1/response/1/step-beginning/"],submitButtonShouldBeVisible:NO,submitButtonTitle:"",isLastStep:YES},{url:"/backend/activity/1/page/2/step/1/",activityPage:"/backend/activity/1/page/2/",beforeText:"<p>In the top-right area, draw a graph of someone walking at a slow, steady pace from point A to point B between 0 and 15 seconds.</p>",responseTemplate:null,afterText:"",buttons:[],triggerResponses:["/backend/activity/1/page/2/step/1/response/1/step-beginning/","/backend/activity/1/page/2/step/1/response/2/step-finished/"],submitButtonShouldBeVisible:YES,submitButtonTitle:"Done",isLastStep:NO},{url:"/backend/activity/1/page/2/step/2/",activityPage:"/backend/activity/1/page/2/",beforeText:"<p>In the bottom-right area, draw a graph of someone walking at a slow, steady pace from point B to point A between 0 and 15 seconds. Click Next when you are ready.</p>",responseTemplate:null,afterText:"",buttons:[],triggerResponses:["/backend/activity/1/page/2/step/2/response/1/step-beginning/"],submitButtonShouldBeVisible:YES,submitButtonTitle:"Done",isLastStep:YES},{url:"/backend/activity/1/page/3/step/1/",activityPage:"/backend/activity/1/page/3/",beforeText:"<p>Place the sensor at the 0-meter mark. Stand near the sensor. When you are ready, have your partner click Start to record the position and time data for your movements. Walk on the path for 15 seconds. Experiment with different kinds of motions (walking fast, slow, forward, backward…) Click Stop after 15 seconds is up. Click Reset to try a different movement.</p>",responseTemplate:null,afterText:"",buttons:[],triggerResponses:["/backend/activity/1/page/3/step/1/response/1/step-beginning/","/backend/activity/1/page/3/step/1/response/2/step-finished/"],submitButtonShouldBeVisible:YES,submitButtonTitle:"Done",isLastStep:NO},{url:"/backend/activity/1/page/3/step/2/",activityPage:"/backend/activity/1/page/3/",beforeText:"<p>How are different motions represented on a position-time graph? (For example, what does the graph look like when you are standing still, walking forward ...?)</p><p>Try to use some of the following words: slope, flat, upward, downward, curved, straight, steep, gradual, line, curve.",responseTemplate:"/backend/response-template/2/open/",afterText:"",buttons:[],triggerResponses:["/backend/activity/1/page/3/step/2/response/1/step-beginning/"],submitButtonShouldBeVisible:YES,submitButtonTitle:"Submit My Answer",isLastStep:YES},{url:"/backend/activity/1/page/4/step/1/",activityPage:"/backend/activity/1/page/3/",beforeText:"<p>At right is your prediction and your actual motion, together</p>",responseTemplate:null,afterText:"",buttons:[],triggerResponses:["/backend/activity/1/page/4/step/1/response/1/step-beginning/"],submitButtonShouldBeVisible:NO,submitButtonTitle:"",isLastStep:YES}];
Smartgraphs.Axes=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",xMin:SC.Record.attr(Number),xMax:SC.Record.attr(Number),xSteps:SC.Record.attr(Number),xLabel:SC.Record.attr(String),xLabelAbbreviated:SC.Record.attr(String),yMin:SC.Record.attr(Number),yMax:SC.Record.attr(Number),ySteps:SC.Record.attr(Number),yLabel:SC.Record.attr(String),yLabelAbbreviated:SC.Record.attr(String)});
sc_require("models/axes");Smartgraphs.Axes.FIXTURES=[{url:"/backend/axes/1/5m-15s/",xMin:0,xMax:15,xSteps:15,xLabel:"Time (seconds)",xLabelAbbreviated:"Time (s)",yMin:0,yMax:5,ySteps:10,yLabel:"Position (meters)",yLabelAbbreviated:"Position (m)"}];
Smartgraphs.Button=SC.Record.extend({name:SC.Record.attr(String),title:SC.Record.attr(String),description:SC.Record.attr(String),width:SC.Record.attr(Number),isSubmitButton:SC.Record.attr(Boolean)});
sc_require("models/button");Smartgraphs.Button.FIXTURES=[];Smartgraphs.Command=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",name:SC.Record.attr(String),description:SC.Record.attr(String),actionName:SC.Record.attr(String),literalArgs:SC.Record.attr(Object),substitutedArgs:SC.Record.attr(Object)});
sc_require("models/command");Smartgraphs.Command.FIXTURES=[{url:"/backend/command/1/show-single-pane/",name:"showSinglePane",description:"Set the right-side display to show a single pane.",actionName:"showSinglePane",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/2/show-split-pane/",name:"showSplitPane",description:"Set the right-side display to show two panes.",actionName:"showSplitPane",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/3/show-image/",name:"showFirstPaneImage",description:"Set the right-side display to show an image in the first (or top) pane.",actionName:"showImage",literalArgs:{pane:"first"},substitutedArgs:{}},{url:"/backend/command/4/show-graph/",name:"showGraph",description:"Set the right-side display to show a graph.",actionName:"showGraph",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/5/enable-submission/",name:"enableSubmission",description:"Allows the user to submit his or her work on this step",actionName:"enableSubmission",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/6/finish-step/",name:"finishActivityStep",description:"Finishes this Activity step.",actionName:"finishActivityStep",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/7/enable-prediction-graph-input/",name:"enablePredictionGraphInput",description:"Open up the prediction graph.",actionName:"enablePredictionGraphInput",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/8/goto-step/",name:"openActivityStep",description:"Open a new activity step.",actionName:"openActivityStep",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/9/enable-sensor-input/",name:"enableSensorInput",description:"Open the controls that input data from a usb-connected sensor.",actionName:"enableSensorInput",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/10/hide-pane/",name:"hidePane",description:"Hide the first or second pane.",actionName:"hidePane",literalArgs:{},substitutedArgs:{}},{url:"/backend/command/11/wait-for-valid-response/",name:"waitForValidResponse",description:"Wait for a valid response before allowing submission.",actionName:"waitForValidResponse",literalArgs:{},substitutedArgs:{}}];
Smartgraphs.CommandInvocation=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",command:SC.Record.toOne("Smartgraphs.Command"),triggerResponse:SC.Record.toOne("Smartgraphs.TriggerResponse",{inverse:"commands"}),index:SC.Record.attr(Number),literalArgs:SC.Record.attr(Object),substitutedArgs:SC.Record.attr(Object)});
sc_require("models/command_invocation");Smartgraphs.CommandInvocation.FIXTURES=[{url:"/backend/activity/1/page/1/step/1/response/1/command/1/single-pane/",command:"/backend/command/1/show-single-pane/",triggerResponse:"/backend/activity/1/page/1/step/1/response/1/step-beginning/",index:1,literalArgs:{},substitutedArgs:{}},{url:"/backend/activity/1/page/1/step/1/response/1/command/2/show-image/",command:"/backend/command/3/show-image/",triggerResponse:"/backend/activity/1/page/1/step/1/response/1/step-beginning/",index:2,literalArgs:{path:"/static/smartgraphs/en/ebb665ef3ab6a11a32f0c0726412647f900cffb6/resources/arrow.jpg"},substitutedArgs:{}},{url:"/backend/activity/1/page/1/step/1/response/1/command/3/finish-step/",command:"/backend/command/6/finish-step/",triggerResponse:"/backend/activity/1/page/1/step/1/response/1/step-beginning/",index:3,literalArgs:{},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/1/response/1/command/1/split-pane/",command:"/backend/command/2/show-split-pane/",triggerResponse:"/backend/activity/1/page/2/step/1/response/1/step-beginning/",index:1,literalArgs:{},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/1/response/1/command/2/show-graph/",command:"/backend/command/4/show-graph/",triggerResponse:"/backend/activity/1/page/2/step/1/response/1/step-beginning/",index:2,literalArgs:{pane:"first",graphId:"/backend/activity/1/graph/1/prediction-away/"},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/1/response/1/command/3/enable-submission/",command:"/backend/command/5/enable-submission/",triggerResponse:"/backend/activity/1/page/2/step/1/response/1/step-beginning/",index:3,literalArgs:{},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/1/response/1/command/4/start-input/",command:"/backend/command/7/enable-prediction-graph-input/",triggerResponse:"/backend/activity/1/page/2/step/1/response/1/step-beginning/",index:4,literalArgs:{pane:"first",seriesId:"/backend/series/1/prediction-away/",xMin:0,xMax:15},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/1/response/2/command/1/goto-step-2/",command:"/backend/command/8/goto-step/",triggerResponse:"/backend/activity/1/page/2/step/1/response/2/step-finished/",index:1,literalArgs:{stepId:"/backend/activity/1/page/2/step/2/"},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/2/response/1/command/1/show-graph/",command:"/backend/command/4/show-graph/",triggerResponse:"/backend/activity/1/page/2/step/2/response/1/step-beginning/",index:1,literalArgs:{pane:"second",graphId:"/backend/activity/1/graph/2/prediction-toward/"},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/2/response/1/command/2/enable-submission/",command:"/backend/command/5/enable-submission/",triggerResponse:"/backend/activity/1/page/2/step/2/response/1/step-beginning/",index:2,literalArgs:{},substitutedArgs:{}},{url:"/backend/activity/1/page/2/step/2/response/1/command/3/predict/",command:"/backend/command/7/enable-prediction-graph-input/",triggerResponse:"/backend/activity/1/page/2/step/2/response/1/step-beginning/",index:3,literalArgs:{pane:"second",seriesId:"/backend/series/2/prediction-toward/",xMin:0,xMax:15},substitutedArgs:{}},{url:"/backend/activity/1/page/3/step/1/response/1/command/1/show-graph/",command:"/backend/command/4/show-graph/",triggerResponse:"/backend/activity/1/page/3/step/1/response/1/step-beginning/",index:1,literalArgs:{pane:"first",graphId:"/backend/activity/1/graph/3/sensor-playing/"},substitutedArgs:{}},{url:"/backend/activity/1/page/3/step/1/response/1/command/2/hide-pane/",command:"/backend/command/10/hide-pane/",triggerResponse:"/backend/activity/1/page/3/step/1/response/1/step-beginning/",index:2,literalArgs:{pane:"second"},substitutedArgs:{}},{url:"/backend/activity/1/page/3/step/1/response/1/command/3/enable-submission/",command:"/backend/command/5/enable-submission/",triggerResponse:"/backend/activity/1/page/3/step/1/response/1/step-beginning/",index:3,literalArgs:{},substitutedArgs:{}},{url:"/backend/activity/1/page/3/step/1/response/1/command/4/start-sensor/",command:"/backend/command/9/enable-sensor-input/",triggerResponse:"/backend/activity/1/page/3/step/1/response/1/step-beginning/",index:4,literalArgs:{pane:"first",seriesId:"/backend/series/3/sensor/"},substitutedArgs:{}},{url:"/backend/activity/1/page/3/step/1/response/2/command/1/goto-step-2/",command:"/backend/command/8/goto-step/",triggerResponse:"/backend/activity/1/page/3/step/1/response/2/step-finished/",index:1,literalArgs:{stepId:"/backend/activity/1/page/3/step/2/"},substitutedArgs:{}},{url:"/backend/activity/1/page/3/step/2/response/1/command/1/wait-for-valid-response/",command:"/backend/command/11/wait-for-valid-response/",triggerResponse:"p3s2-do-step-begin",index:1,literalArgs:{},substitutedArgs:{}},{url:"/backend/activity/1/page/4/step/1/response/1/command/1/hide-pane/",command:"/backend/command/10/hide-pane/",triggerResponse:"/backend/activity/1/page/4/step/1/response/1/step-beginning/",index:1,literalArgs:{pane:"second"},substitutedArgs:{}},{url:"/backend/activity/1/page/4/step/1/response/1/command/2/show-graph/",command:"/backend/command/4/show-graph/",triggerResponse:"/backend/activity/1/page/4/step/1/response/1/step-beginning/",index:2,literalArgs:{pane:"first",graphId:"/backend/activity/1/graph/4/combined/"},substitutedArgs:{}}];
Smartgraphs.DataPoint=SC.Record.extend({x:SC.Record.attr(Number),y:SC.Record.attr(Number),series:SC.Record.toOne("Smartgraphs.DataSeries",{inverse:"points"})});
sc_require("models/data_point");Smartgraphs.DataPoint.FIXTURES=[];Smartgraphs.DataPoint.nextGuid=11;
Smartgraphs.DataSeries=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",points:SC.Record.toMany("Smartgraphs.DataPoint",{inverse:"series"})});
sc_require("models/data_series");Smartgraphs.DataSeries.FIXTURES=[{url:"/backend/series/1/prediction-away/",points:[]},{url:"/backend/series/2/prediction-toward/",points:[]},{url:"/backend/series/3/sensor/",points:[]}];
Smartgraphs.Graph=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",name:SC.Record.attr(String),description:SC.Record.attr(String),axes:SC.Record.toOne("Smartgraphs.Axes"),allSeries:SC.Record.toMany("Smartgraphs.DataSeries")});
sc_require("models/graph");Smartgraphs.Graph.FIXTURES=[{url:"/backend/activity/1/graph/1/prediction-away/",name:"Prediction-Away",description:"Prediction graph of movement away",axes:"/backend/axes/1/5m-15s/",allSeries:[]},{url:"/backend/activity/1/graph/2/prediction-toward/",name:"Prediction-Toward",description:"Prediction graph of movement towards",axes:"/backend/axes/1/5m-15s/",allSeries:[]},{url:"/backend/activity/1/graph/3/sensor-playing/",name:"Sensor-Playing",description:"Playing around with the sensor in page 3",axes:"/backend/axes/1/5m-15s/",allSeries:[]},{url:"/backend/activity/1/graph/4/combined/",name:"Combined",description:"Combines the prediction graphs and the sensor graph",axes:"/backend/axes/1/5m-15s/",allSeries:["/backend/series/1/prediction-away/","/backend/series/3/sensor/"]}];
Smartgraphs.Inspector=SC.Record.extend({});sc_require("models/inspector");Smartgraphs.Inspector.FIXTURES=[];
Smartgraphs.ResponseTemplate=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",templateString:SC.Record.attr(String),fieldTypes:SC.Record.attr(Array),fieldChoiceLists:SC.Record.attr(Array),intialValues:SC.Record.attr(Array),values:[]});
sc_require("models/response_template");Smartgraphs.ResponseTemplate.FIXTURES=[{url:"/backend/response-template/1/numeric/",templateString:"",fieldTypes:["numeric"],fieldChoiceLists:[null],initialValues:[""]},{url:"/backend/response-template/2/open/",templateString:"",fieldTypes:["textarea"],fieldChoiceLists:[null],initialValues:[""]}];
Smartgraphs.Trigger=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",name:SC.Record.attr(String),description:SC.Record.attr(String),args:SC.Record.attr(Object)});
sc_require("models/trigger");Smartgraphs.Trigger.FIXTURES=[{url:"/backend/trigger/1/step-beginning/",name:"stepBeginning",description:"This is the list of commands that run when the activity step begins.",args:{}},{url:"/backend/trigger/2/response-submitted/",name:"responseSubmitted",description:"This is the list of commands that check the answer.",args:{}},{url:"/backend/trigger/3/step-finished/",name:"stepFinished",description:"This is the list of commands that run when the activity step finishes.",args:{}}];
Smartgraphs.TriggerResponse=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",trigger:SC.Record.toOne("Smartgraphs.Trigger"),step:SC.Record.toOne("Smartgraphs.ActivityStep",{inverse:"triggerResponses"}),args:SC.Record.attr(Object),commands:SC.Record.toMany("Smartgraphs.CommandInvocation",{inverse:"triggerResponse",orderBy:"index"})});
sc_require("models/trigger_response");Smartgraphs.TriggerResponse.FIXTURES=[{url:"/backend/activity/1/page/1/step/1/response/1/step-beginning/",trigger:"/backend/trigger/1/step-beginning/",step:"/backend/activity/1/page/1/step/1/",args:{},commands:["/backend/activity/1/page/1/step/1/response/1/command/1/single-pane/","/backend/activity/1/page/1/step/1/response/1/command/2/show-image/","/backend/activity/1/page/1/step/1/response/1/command/3/finish-step/"]},{url:"/backend/activity/1/page/2/step/1/response/1/step-beginning/",trigger:"/backend/trigger/1/step-beginning/",step:"/backend/activity/1/page/2/step/1/",args:{},commands:["/backend/activity/1/page/2/step/1/response/1/command/1/split-pane/","/backend/activity/1/page/2/step/1/response/1/command/2/show-graph/","/backend/activity/1/page/2/step/1/response/1/command/3/enable-submission/","/backend/activity/1/page/2/step/1/response/1/command/4/start-input/"]},{url:"/backend/activity/1/page/2/step/1/response/2/step-finished/",trigger:"/backend/trigger/3/step-finished/",step:"/backend/activity/1/page/2/step/1/",args:{},commands:["/backend/activity/1/page/2/step/1/response/2/command/1/goto-step-2/"]},{url:"/backend/activity/1/page/2/step/2/response/1/step-beginning/",trigger:"/backend/trigger/1/step-beginning/",step:"/backend/activity/1/page/2/step/2/",args:{},commands:["/backend/activity/1/page/2/step/2/response/1/command/1/show-graph/","/backend/activity/1/page/2/step/2/response/1/command/2/enable-submission/","/backend/activity/1/page/2/step/2/response/1/command/3/predict/"]},{url:"/backend/activity/1/page/3/step/1/response/1/step-beginning/",trigger:"/backend/trigger/1/step-beginning/",step:"/backend/activity/1/page/3/step/1/",args:{},commands:["/backend/activity/1/page/3/step/1/response/1/command/1/show-graph/","/backend/activity/1/page/3/step/1/response/1/command/2/hide-pane/","/backend/activity/1/page/3/step/1/response/1/command/3/enable-submission/","/backend/activity/1/page/3/step/1/response/1/command/4/start-sensor/"]},{url:"/backend/activity/1/page/3/step/1/response/2/step-finished/",trigger:"/backend/trigger/3/step-finished/",step:"/backend/activity/1/page/3/step/1/",args:{},commands:["/backend/activity/1/page/3/step/1/response/2/command/1/goto-step-2/"]},{url:"/backend/activity/1/page/3/step/2/response/1/step-beginning/",trigger:"/backend/trigger/1/step-beginning/",step:"/backend/activity/1/page/3/step/2/",args:{},commands:["/backend/activity/1/page/3/step/2/response/1/command/1/wait-for-valid-response/"]},{url:"/backend/activity/1/page/4/step/1/response/1/step-beginning/",trigger:"/backend/trigger/1/step-beginning/",step:"/backend/activity/1/page/4/step/1/",args:{},commands:["/backend/activity/1/page/4/step/1/response/1/command/1/hide-pane/","/backend/activity/1/page/4/step/1/response/1/command/2/show-graph/"]}];
Smartgraphs.Activity=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",title:SC.Record.attr(String),pages:SC.Record.toMany("Smartgraphs.ActivityPage",{inverse:"activity",orderBy:"index"}),context:{}});
Smartgraphs.READY=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){SC.routes.add("*activityId",this,"route")
},willLoseFirstResponder:function(){},route:function(b){var a=b.activityId;if(a){Smartgraphs.sendAction("openActivity",this,{id:a})
}},openActivity:function(b,a){var c=Smartgraphs.activityController.get("content");
if(c&&c.get("id")===a.id){return YES}Smartgraphs.activityController.set("content",Smartgraphs.store.find(Smartgraphs.Activity,a.id));
Smartgraphs.LOADING_ACTIVITY.set("idBeingLoaded",a.id);Smartgraphs.makeFirstResponder(Smartgraphs.LOADING_ACTIVITY);
return YES}});sc_require("states/ready");Smartgraphs.ACTIVITY=SC.Responder.create({nextResponder:Smartgraphs.READY,didBecomeFirstResponder:function(){Smartgraphs.appWindowController.showActivityView()
},willLoseFirstResponder:function(){},fireActivityEvent:function(c,b){if(b.eventName){var a=Smartgraphs.triggers[b.eventName];
if(a){a.eventWasObserved()}}return YES},_graphControllerFor:function(a){if(a==="first"){return Smartgraphs.firstGraphController
}if(a==="second"){return Smartgraphs.secondGraphController}},_graphViewFor:function(a){if(a==="first"){return Smartgraphs.getPath("activityPage.firstGraphView")
}if(a==="second"){return Smartgraphs.getPath("activityPage.firstGraphView")}},showSinglePane:function(){return Smartgraphs.activityViewController.showSinglePane()
},showSplitPane:function(){return Smartgraphs.activityViewController.showSplitPane()
},showImage:function(b,a){return Smartgraphs.activityViewController.showImage(a.pane,a.path)
},showGraph:function(b,a){Smartgraphs.activityViewController.showGraph(a.pane,a.graphId);
return YES},hidePane:function(b,a){Smartgraphs.activityViewController.hidePane(a.pane);
return YES},setAxes:function(c,b){var a=this._graphControllerFor(b.pane);a.setAxes(b.axesId);
return YES},addSeries:function(c,b){var a=this._graphControllerFor(b.pane);a.addSeries(b.seriesId);
return YES},removeSeries:function(c,b){var a=this._graphControllerFor(b.pane);a.removeSeries(b.seriesId);
return YES},removeAllSeries:function(b,a){return NO},selectDataSeries:function(c,a){var b=Smartgraphs.store.find(Smartgraphs.DataSeries,a.seriesId);
Smartgraphs.selectedSeriesController.set("content",b);return YES},enablePredictionGraphInput:function(c,b){Smartgraphs.sendAction("addSeries",this,{pane:b.pane,seriesId:b.seriesId});
Smartgraphs.sendAction("selectDataSeries",this,{seriesId:b.seriesId});Smartgraphs.selectedSeriesController.set("xMin",b.xMin);
Smartgraphs.selectedSeriesController.set("xMax",b.xMax);var a=this._graphControllerFor(b.pane);
Smartgraphs.inputGraphController=this._graphControllerFor(b.pane);Smartgraphs.GRAPH_INPUT.set("nextResponder",Smartgraphs.get("firstResponder"));
Smartgraphs.makeFirstResponder(Smartgraphs.GRAPH_INPUT);return YES},enableSensorInput:function(b,a){Smartgraphs.sendAction("addSeries",this,{pane:a.pane,seriesId:a.seriesId});
Smartgraphs.sendAction("selectDataSeries",this,{seriesId:a.seriesId});Smartgraphs.SENSOR.set("nextResponder",Smartgraphs.get("firstResponder"));
Smartgraphs.makeFirstResponder(Smartgraphs.SENSOR);return YES}});sc_require("states/activity");
Smartgraphs.ACTIVITY_DONE=SC.Responder.create({nextResponder:Smartgraphs.ACTIVITY,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){}});
sc_require("states/activity");Smartgraphs.ACTIVITY_PAGE_DONE=SC.Responder.create({nextResponder:Smartgraphs.ACTIVITY,didBecomeFirstResponder:function(){if(Smartgraphs.activityController.get("isLastPage")){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_DONE)
}else{Smartgraphs.activityController.set("canOpenNextPage",YES)}},willLoseFirstResponder:function(){Smartgraphs.activityController.set("canOpenNextPage",NO)
},openNextActivityPage:function(){Smartgraphs.activityController.openNextPage()}});
sc_require("states/activity");Smartgraphs.ACTIVITY_PAGE_START=SC.Responder.create({nextResponder:Smartgraphs.ACTIVITY,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},pageContentBinding:"Smartgraphs.activityPageController.content",_pageContentDidChange:function(){var a=this.get("pageContent");
if(a&&a.get("length")>0){this.invokeOnce(this._tryToBeginActivityPage)}}.observes("pageContent"),_tryToBeginActivityPage:function(){Smartgraphs.sendAction("beginActivityPage")
},beginActivityPage:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_START);
Smartgraphs.activityPageController.set("currentStep",Smartgraphs.activityPageController.get("firstStep"));
return YES}});sc_require("states/activity");Smartgraphs.ACTIVITY_STEP_DONE=SC.Responder.create({nextResponder:Smartgraphs.ACTIVITY,didBecomeFirstResponder:function(){Smartgraphs.activityStepController.finish();
if(Smartgraphs.activityStepController.get("isLastStep")){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_PAGE_DONE)
}},willLoseFirstResponder:function(){},openActivityStep:function(b,a){var c=Smartgraphs.store.find(Smartgraphs.ActivityStep,a.stepId);
Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_START);Smartgraphs.activityPageController.set("currentStep",c);
return YES}});sc_require("states/activity");Smartgraphs.ACTIVITY_STEP_START=SC.Responder.create({nextResponder:Smartgraphs.ACTIVITY,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},stepContentBinding:"Smartgraphs.activityStepController.content",_stepContentDidChange:function(){if(this.get("stepContent")){this.invokeOnce(this._tryToBeginActivityStep)
}}.observes("stepContent"),_tryToBeginActivityStep:function(){Smartgraphs.sendAction("beginActivityStep")
},beginActivityStep:function(){Smartgraphs.activityStepController.begin()},enableSubmission:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_SUBMIT);
return YES},waitForValidResponse:function(c,b){var d=Smartgraphs.activityStepController.get("registeredTriggers");
var a;if(d.lastIndexOf("responseBecameValid")<0){a=Smartgraphs.triggers.responseBecameValid;
a.register(b,[]);d.pushObject(a)}if(d.lastIndexOf("responseBecameInvalid")<0){a=Smartgraphs.triggers.responseBecameInvalid;
a.register({},[]);d.pushObject(a)}Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_WAITING);
Smartgraphs.responseTemplateController.set("editingShouldBeEnabled",YES);return YES
},finishActivityStep:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_DONE);
return YES}});sc_require("states/activity");Smartgraphs.ACTIVITY_STEP_SUBMIT=SC.Responder.create({nextResponder:Smartgraphs.ACTIVITY,didBecomeFirstResponder:function(){Smartgraphs.activityStepController.set("submitButtonShouldBeEnabled",YES)
},willLoseFirstResponder:function(){Smartgraphs.activityStepController.set("submitButtonShouldBeEnabled",NO)
},disableSubmission:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_WAITING);
return YES},finishActivityStep:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_DONE);
Smartgraphs.responseTemplateController.set("editingShouldBeEnabled",NO);Smartgraphs.sendAction("fireActivityEvent",this,{eventName:"responseSubmitted"});
return YES}});sc_require("states/activity");Smartgraphs.ACTIVITY_STEP_WAITING=SC.Responder.create({nextResponder:Smartgraphs.ACTIVITY,didBecomeFirstResponder:function(){Smartgraphs.activityStepController.set("submitButtonShouldBeEnabled",NO)
},willLoseFirstResponder:function(){},enableSubmission:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_STEP_SUBMIT);
return YES}});sc_require("states/ready");Smartgraphs.ERROR_LOADING_ACTIVITY=SC.Responder.create({nextResponder:Smartgraphs.READY,didBecomeFirstResponder:function(){Smartgraphs.appWindowController.showActivityLoadingErrorView()
},willLoseFirstResponder:function(){}});Smartgraphs.GRAPH_INPUT=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){Smartgraphs.inputGraphController.startRoutingInputEvents()
},willLoseFirstResponder:function(){Smartgraphs.inputGraphController.stopRoutingInputEvents()
},resignFirstResponder:function(a){if(Smartgraphs.get("firstResponder")===this){Smartgraphs.makeFirstResponder(this.get("nextResponder"),a)
}return YES},startGraphInputAt:function(b,a){Smartgraphs.selectedPointsController.startGraphInputAt(a.x,a.y);
return YES},continueGraphInputAt:function(b,a){Smartgraphs.selectedPointsController.continueGraphInputAt(a.x,a.y);
return YES},endGraphInputAt:function(b,a){Smartgraphs.selectedPointsController.endGraphInputAt(a.x,a.y);
return YES},endPredictionGraphInput:function(){this.resignFirstResponder()}});Smartgraphs.LEARNER_HOME=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},someAction:function(){}});
Smartgraphs.LEARNER_HOME=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},someAction:function(){}});
sc_require("states/ready");Smartgraphs.LOADING_ACTIVITY=SC.Responder.create({nextResponder:Smartgraphs.READY,idBeingLoaded:null,activityStatusBinding:"Smartgraphs.activityController*content.status",didBecomeFirstResponder:function(){SC.RunLoop.end();
SC.RunLoop.begin();if(this.handlePossibleLoadCompletion()===NO){Smartgraphs.appWindowController.showActivityLoadingView()
}},willLoseFirstResponder:function(){},_activityStatusDidChange:function(){this.invokeOnce(this.handlePossibleLoadCompletion)
}.observes("activityStatus"),handlePossibleLoadCompletion:function(){var a=this.get("activityStatus");
if(a===SC.Record.READY_CLEAN){Smartgraphs.sendAction("beginactivity");return YES}else{if(a===SC.Record.ERROR){Smartgraphs.sendAction("handleactivityLoadError");
return YES}}return NO},openActivity:function(b,a){if(a.id===this.get("idBeingLoaded")){return YES
}Smartgraphs.invokeLater(Smartgraphs.resetFirstResponder);return NO},beginactivity:function(){if(Smartgraphs.activityPagesController.get("length")>0){Smartgraphs.makeFirstResponder(Smartgraphs.ACTIVITY_PAGE_START);
Smartgraphs.activityPagesController.selectFirstPage()}},handleactivityLoadError:function(){Smartgraphs.makeFirstResponder(Smartgraphs.ERROR_LOADING_ACTIVITY)
}});Smartgraphs.LOGIN=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},someAction:function(){}});
Smartgraphs.SENSOR=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){Smartgraphs.appletPage.get("appletPane").append()
},willLoseFirstResponder:function(){Smartgraphs.appletPage.get("appletPane").remove()
},resignFirstResponder:function(a){if(Smartgraphs.get("firstResponder")===this){Smartgraphs.makeFirstResponder(this.get("nextResponder"),a)
}return YES},sensorDataReceived:function(b,a){Smartgraphs.selectedPointsController.addSensorPoint(a.x,a.y)
},endSensorInput:function(b,a){this.resignFirstResponder()}});sc_require("states/sensor");
Smartgraphs.SENSOR_ERROR=SC.Responder.create({nextResponder:Smartgraphs.SENSOR,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},someAction:function(){}});
sc_require("states/sensor");Smartgraphs.SENSOR_READY=SC.Responder.create({nextResponder:Smartgraphs.SENSOR,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},someAction:function(){}});
sc_require("states/sensor");Smartgraphs.SENSOR_RECORDING=SC.Responder.create({nextResponder:Smartgraphs.SENSOR,didBecomeFirstResponder:function(){},willLoseFirstResponder:function(){},someAction:function(){}});
Smartgraphs.START=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){Smartgraphs.makeFirstResponder(Smartgraphs.READY)
},willLoseFirstResponder:function(){}});Smartgraphs.TriggerObserver=SC.Object.extend({isRegistered:NO,commands:null,register:function(b,a){this.set("isRegistered",YES);
this.set("commands",a);if(this.registerObservers){this.registerObservers(b)}},unregister:function(){this.set("isRegistered",NO);
this.set("commands",null);if(this.unregisterObservers){this.unregisterObservers()
}},eventWasObserved:function(){if(this.get("isRegistered")){Smartgraphs.activityStepController.executeCommands(this.get("commands"))
}}});sc_require("triggers/trigger_observer");Smartgraphs.triggers.buttonWasClicked=Smartgraphs.TriggerObserver.create({});
sc_require("triggers/trigger_observer");Smartgraphs.triggers.responseBecameInvalid=Smartgraphs.TriggerObserver.create({eventWasObserved:function(){Smartgraphs.sendAction("disableSubmission");
arguments.callee.base.apply(this,arguments)}});sc_require("triggers/trigger_observer");
Smartgraphs.triggers.responseBecameValid=Smartgraphs.TriggerObserver.create({registerObservers:function(a){Smartgraphs.responseTemplateController.addObserver("values.[]",this,this.valuesObserver);
this._valueWasValid=NO},unregisterObservers:function(){Smartgraphs.responseTemplateController.removeObserver("values.[]",this,this.valuesObserver);
this._valueWasValid=NO},valuesObserver:function(){var a=Smartgraphs.responseTemplateController.get("values");
if(!a){return}var c=a.objectAt(0);var b=!!(c&&c.strip().length>0);if(b&&!this._valueWasValid){this.eventWasObserved()
}else{if(this._valueWasValid&&!b){Smartgraphs.sendAction("fireActivityEvent",this,{eventName:"responseBecameInvalid"})
}}this._valueWasValid=b},eventWasObserved:function(){Smartgraphs.sendAction("enableSubmission");
arguments.callee.base.apply(this,arguments)}});sc_require("triggers/trigger_observer");
Smartgraphs.triggers.responseSubmitted=Smartgraphs.TriggerObserver.create({});sc_require("triggers/trigger_observer");
Smartgraphs.triggers.stepBeginning=Smartgraphs.TriggerObserver.create({});sc_require("triggers/trigger_observer");
Smartgraphs.triggers.stepFinished=Smartgraphs.TriggerObserver.create({});Smartgraphs.DataPointView=RaphaelViews.RaphaelView.extend({displayProperties:"content.x content.y isEnabled fill stroke radius".w(),notSelectedFill:"#1F77B4",notSelectedStroke:"#1F77B4",selectedFill:"#FF7F0E",selectedStroke:"#FF7F0E",hoveredRadius:5,notHoveredRadius:3,isEnabled:YES,isHovered:NO,isSelected:NO,layerIsCacheable:YES,isPoolable:YES,fill:function(){return(this.get("isSelected")?this.get("selectedFill"):this.get("notSelectedFill"))
}.property("isSelected","selectedFill","notSelectedFill").cacheable(),stroke:function(){return(this.get("isSelected")?this.get("selectedStroke"):this.get("notSelectedStroke"))
}.property("isSelected","selectedStroke","notSelectedStroke").cacheable(),radius:function(){return(this.get("isHovered")?this.get("hoveredRadius"):this.get("notHoveredRadius"))
}.property("isHovered","hoveredRadius","notHoveredRadius").cacheable(),mouseEntered:function(){this.set("isHovered",YES)
},mouseExited:function(){this.set("isHovered",NO)},renderCallback:function(f,b,e,a,d,c){return f.circle(b,e,a).attr({fill:d,stroke:c})
},render:function(c,a){var h=this.get("fill"),i=this.get("stroke"),d=this.get("radius");
var g=this.getPath("content.x"),e=this.getPath("content.y");var f=this.getPath("parentView.graphView").coordinatesForPoint(g,e);
if(a){c.callback(this,this.renderCallback,f.x,f.y,d,h,i)}else{var b=c.raphael();b.attr({cx:f.x,cy:f.y,r:d,fill:h,stroke:i})
}}});Smartgraphs.GraphView=SC.View.extend({axesBinding:"*graph.axes",allSeriesBinding:"*graph.allSeries",padding:{top:20,right:20,bottom:40,left:60},childViews:"graphCanvasView".w(),init:function(){this._seriesViewsById={};
arguments.callee.base.apply(this,arguments)},viewDidResize:function(){arguments.callee.base.apply(this,arguments);
this.replaceLayer()},coordinatesForPoint:function(l,j){var g=this.get("axes");var b=g.get("xMin"),f=g.get("xMax"),n=g.get("yMin"),e=g.get("yMax");
var d=this.get("frame");var o=d.height,a=d.width;var k=this.get("padding");var i=a-k.left-k.right;
var h=o-k.top-k.bottom;var m=i/f;var c=h/e;return{x:k.left+l*m,y:k.top+h-(j*c)}},pointForCoordinates:function(l,j){var g=this.get("axes");
var b=g.get("xMin"),f=g.get("xMax"),n=g.get("yMin"),e=g.get("yMax");var d=this.get("frame");
var o=d.height,a=d.width;var k=this.get("padding");var i=a-k.left-k.right;var h=o-k.top-k.bottom;
var m=i/f;var c=h/e;return{x:(l-k.left)/m,y:(k.top+h-j)/c}},_allSeriesDidChange:function(){var e=this.get("allSeries");
var c,a;var h={};var g=[],b=[];for(var d=0,j=e.get("length");d<j;d++){c=e.objectAt(d);
a=c.get("id");h[a]=c;if(!this._seriesViewsById.hasOwnProperty(a)){this._addViewForSeries(c)
}}var f;for(a in this._seriesViewsById){if(this._seriesViewsById.hasOwnProperty(a)){f=this._seriesViewsById[a];
if(!h[a]){this._removeSeriesView(f)}}}}.observes("*allSeries.[]"),_addViewForSeries:function(b){var c=SC.Query.local(Smartgraphs.DataPoint,{conditions:"series = {series}",series:b,orderBy:"id"});
var a=RaphaelViews.RaphaelCollectionView.design({exampleView:Smartgraphs.DataPointView,graphView:this,seriesId:b.get("id"),content:Smartgraphs.store.find(c),useFastPath:YES}).create();
this.get("graphCanvasView").appendChild(a);this._seriesViewsById[b.get("id")]=a},_removeSeriesView:function(a){var b=a.get("seriesId");
delete this._seriesViewsById[b];this.get("graphCanvasView").removeChild(a)},graphCanvasView:RaphaelViews.RaphaelCanvasView.design({graphBinding:".parentView*graph",axesBinding:".parentView*axes",childViews:"axesView".w(),axesView:RaphaelViews.RaphaelView.design({axesBinding:".parentView.parentView*axes",paddingBinding:".parentView.parentView*padding",displayProperties:"axes.xMin axes.xMax axes.yMin axes.yMax axes.xLabel axes.yLabel".w(),pointForEvent:function(d){var b=$(this.get("raphaelCanvas").canvas).offset();
var a=d.pageX-b.left;var f=d.pageY-b.top;var c=this.getPath("parentView.parentView");
return c.pointForCoordinates(a,f)},mouseDown:function(b){if(this.get("shouldNotifyController")){var a=this.pointForEvent(b);
return this.get("controller").inputAreaMouseDown(a.x,a.y)}return NO},mouseDragged:function(b){if(this.get("shouldNotifyController")){var a=this.pointForEvent(b);
return this.get("controller").inputAreaMouseDragged(a.x,a.y)}return NO},mouseUp:function(b){if(this.get("shouldNotifyController")){var a=this.pointForEvent(b);
return this.get("controller").inputAreaMouseUp(a.x,a.y)}return NO},renderCallback:function(f,g,b,l,d,j,k,h,a,e,c,n,i){Smartgraphs.raphael=f;
if(g){this.invokeLater(function(){this.drawAxes(f,b,l,d,j,k,h,a,e,c,n,i)})}var m=f.rect(b,d,j,k).attr({fill:"#ffffff",stroke:"#ffffff",opacity:0.7});
return m},drawAxes:function(f,b,k,d,i,j,g,a,e,c,l,h){if(this._x){this._x.remove()
}this._x=f.g.axis(b,k,i,a,g,e,0);if(this._y){this._y.remove()}this._y=f.g.axis(b,k,j,l,c,h,1)
},render:function(e,h){var m=NO;var j,s,b,r,f,n,u,q,p,d,a,t;var o=this.get("axes");
if(o){m=YES;q=o.get("xMin");u=o.get("xMax");p=o.get("xSteps");a=o.get("yMin");d=o.get("yMax");
t=o.get("ySteps");var g=this.getPath("parentView.parentView");var l=g.coordinatesForPoint(0,0);
var i=g.coordinatesForPoint(u,0);var k=g.coordinatesForPoint(0,d);j=l.x;s=i.x;b=l.y;
r=k.y;f=s-j;n=b-r}if(h){e.callback(this,this.renderCallback,m,j,b,r,f,n,u,q,p,d,a,t)
}else{if(m){var c=e.raphael();c.attr({x:j,y:r,width:f,height:n});this.drawAxes(this.get("raphaelCanvas"),j,b,r,f,n,u,q,p,d,a,t)
}}this.renderChildViews(e,h)}})})});Smartgraphs.ImageView=SC.View.extend({});Smartgraphs.ResponseTemplateView=SC.StaticContentView.extend({fieldTypes:null,fieldChoiceLists:null,values:null,editingShouldBeEnabled:null,isVisibleBinding:SC.Binding.bool(".fieldTypes"),fieldsTypesDidChange:function(){this.invokeOnce(this._updateChildViews)
}.observes("fieldTypes"),_updateChildViews:function(){this.get("childViews").invoke("destroy");
var k=this.get("fieldTypes");if(!k){return}var a=this.get("fieldChoiceLists");var l=this.get("values");
var g,e,j;var n,f,b;var d;for(var c=0,m=k.get("length");c<m;c++){g=k.objectAt(c);
e=a.objectAt(c);j=l.objectAt(c);if(g==="textarea"){n=YES;b="Enter you answer here...";
f={height:97}}else{if(g==="numeric"){n=NO;f={height:22,width:100}}else{throw"ResponseTemplateView received unexpected field type string '"+g+"'."
}}d=SC.View.design({useStaticLayout:YES,hasStaticLayout:YES,layout:f,classNames:"text-field-view-wrapper".w(),childViews:[SC.TextFieldView.design({isTextArea:n,hint:b,index:c,value:j,isEnabledBinding:".parentView.parentView.editingShouldBeEnabled",valueDidChange:function(){var i=this.getPath("parentView.parentView.values");
i.replace(this.get("index"),1,this.get("value"))}.observes("value")})]});var h=d.create();
if(c===0){this._firstInputFieldView=h.get("childViews").objectAt(0)}this.appendChild(h)
}this.invokeLater(this._beginEditingFirstView)},_beginEditingFirstView:function(){if(this._firstInputFieldView){this._firstInputFieldView.beginEditing()
}}});Smartgraphs.TableView=SC.View.extend({});Smartgraphs.activityPage=SC.Page.design({activityView:SC.View.design({childViews:"instructionsWrapper dataWrapper".w(),loadingMessage:"Loading Activity...",instructionsWrapper:SC.View.design({layout:{left:0,width:0.5},childViews:"instructionsView".w(),instructionsView:SC.View.design({layout:{right:5,top:0,bottom:0},classNames:"smartgraph-pane",childViews:"textWrapper nextButton".w(),textWrapper:SC.View.design({layout:{top:20,right:20,bottom:80,left:20},classNames:"text-wrapper".w(),childViews:"introText activityStepWrapper".w(),introText:SC.StaticContentView.design({contentBinding:SC.Binding.oneWay("Smartgraphs.activityPageController.introText"),isVisibleBinding:SC.Binding.bool("Smartgraphs.activityPageController.introText")}),activityStepWrapper:SC.View.design({useStaticLayout:YES,hasStaticLayout:YES,childViews:"activityStepDialog buttonsView".w(),activityStepDialog:SC.View.design({useStaticLayout:YES,hasStaticLayout:YES,childViews:"beforeText responseTemplate afterText".w(),classNames:"dialog-text".w(),beforeText:SC.StaticContentView.design({contentBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.beforeText"),isVisibleBinding:SC.Binding.bool("Smartgraphs.activityStepController.beforeText")}),responseTemplate:Smartgraphs.ResponseTemplateView.design({fieldTypesBinding:"Smartgraphs.responseTemplateController.fieldTypes",fieldChoiceListsBinding:"Smartgraphs.responseTemplateController.fieldChoiceLists",valuesBinding:"Smartgraphs.responseTemplateController.values",editingShouldBeEnabledBinding:"Smartgraphs.responseTemplateController.editingShouldBeEnabled"}),afterText:SC.StaticContentView.design({contentBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.afterText"),isVisibleBinding:SC.Binding.bool("Smartgraphs.activityStepController.afterText")})}),buttonsView:SC.View.design({useStaticLayout:YES,hasStaticLayout:YES,layout:{height:24},childViews:"submitButton".w(),submitButton:SC.ButtonView.design({layout:{width:200,right:0},titleBinding:"Smartgraphs.activityStepController.submitButtonTitle",isVisibleBinding:"Smartgraphs.activityStepController.submitButtonShouldBeVisible",isEnabledBinding:"Smartgraphs.activityStepController.submitButtonShouldBeEnabled",action:"finishActivityStep"})})})}),nextButton:SC.ButtonView.design({layout:{right:30,bottom:36,height:24,width:80},title:"Next >>",action:"openNextActivityPage",isEnabledBinding:"Smartgraphs.pageNavController.nextShouldBeEnabled",isVisibleBinding:"Smartgraphs.pageNavController.nextShouldBeVisible"})})}),dataWrapper:SC.View.design({layout:{right:0,width:0.5},childViews:"dataView".w(),dataView:SC.ContainerView.design({layout:{left:5},nowShowingBinding:"Smartgraphs.activityViewController.dataViewNowShowing"})})}),singlePaneDataView:SC.ContainerView.design({classNames:"smartgraph-pane",nowShowingBinding:"Smartgraphs.activityViewController.firstPaneNowShowing"}),splitPaneDataView:SC.View.design({childViews:"topPaneWrapper bottomPaneWrapper".w(),topPaneWrapper:SC.View.design({layout:{top:0,height:0.5},childViews:"topPane".w(),topPane:SC.ContainerView.design({layout:{bottom:5},classNames:"smartgraph-pane",nowShowingBinding:"Smartgraphs.activityViewController.firstPaneNowShowing"})}),bottomPaneWrapper:SC.View.design({layout:{bottom:0,height:0.5},childViews:"bottomPane".w(),bottomPane:SC.ContainerView.design({layout:{top:5},classNames:"smartgraph-pane",nowShowingBinding:"Smartgraphs.activityViewController.secondPaneNowShowing"})})}),firstImageView:SC.ImageView.design({useStaticLayout:YES,hasStaticLayout:YES,valueBinding:"Smartgraphs.activityViewController.firstImageValue",viewDidResize:function(){this.$().width("100%");
this.$().height("100%")}}),secondImageView:SC.ImageView.design({useStaticLayout:YES,hasStaticLayout:YES,valueBinding:"Smartgraphs.activityViewController.secondImageValue",viewDidResize:function(){this.$().width("100%");
this.$().height("100%")}}),firstGraphView:Smartgraphs.GraphView.design({graphBinding:"Smartgraphs.firstGraphController",viewName:"firstGraphView"}),secondGraphView:Smartgraphs.GraphView.design({graphBinding:"Smartgraphs.secondGraphController",viewName:"secondGraphView"}),firstTableView:Smartgraphs.TableView.design({}),secondTableView:Smartgraphs.TableView.design({}),errorLoadingActivityView:SC.View.design({classNames:"smartgraph-pane",childViews:"errorMessage".w(),errorMessage:SC.LabelView.design({layout:{height:32,width:500,centerX:0,centerY:0},classNames:"error",textAlign:SC.ALIGN_CENTER,value:"There was an error loading that Activity."})})});
Smartgraphs.appletPage=SC.Page.design({appletPane:SC.PalettePane.design({layout:{left:0,top:0,width:255,height:285},contentView:SC.View.design({childViews:"sensorApplet startButton stopButton resetButton".w(),sensorApplet:CC.SensorAppletView.design({layout:{left:0,top:0,width:1,height:1},safariSensorStatePath:"Smartgraphs.appletPage.appletPane.contentView.sensorApplet.sensorState",hideButtons:YES,dt:0.1,resultsBinding:"Smartgraphs.selectedPointsController",listenerPath:"Smartgraphs.appletPage.appletPane.contentView.sensorApplet",everyNth:2,maxPoints:75,_nsamples:0,_npoints:0,dataReceived:function(g,h,c){var e=this.getPath("results");
var a=this.get("dt");var k=e.get("length");var d=this.get("everyNth");var j=this.get("maxPoints");
for(var b=0;b<h;b++){var f=c[b];if(this._nsamples%d===0){SC.RunLoop.begin();Smartgraphs.sendAction("sensorDataReceived",this,{x:this._nsamples*a,y:f});
SC.RunLoop.end()}this._nsamples++}},sensorsReady:function(){SC.RunLoop.begin();this.setPath("parentView.startButton.isEnabled",YES);
this.getPath("parentView.resetButton").action();SC.RunLoop.end()}}),startButton:SC.ButtonView.design({layout:{centerX:0,centerY:-60,height:24,width:160},isEnabled:NO,title:"Start",appletBinding:".parentView.sensorApplet",action:function(){this.set("isEnabled",NO);
this.setPath("parentView.stopButton.isEnabled",YES);this.setPath("parentView.resetButton.isEnabled",YES);
this.get("applet").start();this.get("applet")._nsamples=0}}),stopButton:SC.ButtonView.design({layout:{centerX:0,centerY:0,height:24,width:160},isVisibleBinding:".parentView.shouldBeEnabled",isEnabled:NO,title:"Stop",appletBinding:".parentView.sensorApplet",action:function(){this.set("isEnabled",NO);
this.get("applet").stop()}}),resetButton:SC.ButtonView.design({layout:{centerX:0,centerY:60,height:24,width:160},isVisibleBinding:".parentView.shouldBeEnabled",isEnabled:NO,title:"Reset",appletBinding:".parentView.sensorApplet",resultsBinding:"Smartgraphs.selectedPointsController",action:function(){this.set("isEnabled",NO);
this.setPath("parentView.stopButton.isEnabled",NO);this.setPath("parentView.startButton.isEnabled",YES);
this.get("applet").reset();var a=this.getPath("results");a.invoke("destroy");Smartgraphs.store.commitRecords();
this.get("applet")._nsamples=0}})})})});Smartgraphs.mainPage=SC.Page.design({mainPane:SC.MainPane.design({layout:{minWidth:960,minHeight:600},childViews:"container".w(),defaultResponder:"Smartgraphs",container:SC.ContainerView.design({layout:{top:15,right:20,bottom:15,left:20},nowShowingBinding:"Smartgraphs.appWindowController.nowShowing"})}),loadingView:SC.View.design({classNames:"smartgraph-pane".w(),childViews:"loadingIconView loadingMessageView".w(),loadingIconView:SC.ImageView.design({layout:{width:48,height:48,centerX:0,centerY:-39},value:"/static/smartgraphs/en/ebb665ef3ab6a11a32f0c0726412647f900cffb6/resources/pane_loading.gif"}),loadingMessageView:SC.LabelView.design({classNames:"loading".w(),layout:{width:200,height:24,centerX:0,centerY:15},textAlign:SC.ALIGN_CENTER,valueBinding:"Smartgraphs.appWindowController.loadingMessage"})})});
Smartgraphs.main=function main(){Smartgraphs.dataSource=SC.CascadeDataSource.create({dataSources:"rails fixtures".w(),rails:Smartgraphs.RailsDataSource.create(),fixtures:SC.FixturesDataSource.create({simulateRemoteResponse:NO,latency:500})});
Smartgraphs.store=SC.Store.create().from(Smartgraphs.dataSource);Smartgraphs.getPath("mainPage.mainPane").append();
if(!window.location.hash){window.location.hash="/backend/activity/1/motion-without-words/"
}Smartgraphs.makeFirstResponder(Smartgraphs.START)};function main(){Smartgraphs.main()
};